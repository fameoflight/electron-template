/**
 * {{className}}Resolver - Custom resolver extending generated base
 *
 * ✅ EDIT THIS FILE to add custom queries and mutations
 * ⚠️  This file is created once and never overwritten
 *
 * Generated base provides (from {{className}}ResolverBase):
 * - Queries: {{camelName}}(id), {{pluralCamelName}}(args), {{pluralCamelName}}Array(kind)
 * - Mutations: create, update, createUpdate, destroy, delete, restore
 * - Helpers: validateInput() (from BaseResolver)
 *
 * Add your custom business logic below!
 */

import { Resolver, Query, Arg, Ctx } from 'type-graphql';
import { {{className}}ResolverBase } from './__generated__/{{className}}ResolverBase.js';
import { {{className}} } from '@db/entities/{{className}}.js';
import type { GraphQLContext } from '@shared/types';
import { FieldMutation } from '@base/index.js';

@Resolver(() => {{className}})
export class {{className}}Resolver extends {{className}}ResolverBase {
  // ──────────────────────────────────────────────────────────────────────────
  // Custom Queries
  // ──────────────────────────────────────────────────────────────────────────

  // Example: Get entities for current user
  // @Query(() => [{{className}}], { description: 'Get my {{pluralCamelName}}' })
  // async my{{className}}s(@Ctx() ctx: GraphQLContext): Promise<{{className}}[]> {
  //   return await this.getRepository(ctx).find({
  //     where: { userId: ctx.userId }
  //   });
  // }

  // ──────────────────────────────────────────────────────────────────────────
  // Custom Mutations
  // ──────────────────────────────────────────────────────────────────────────

  // Example: Custom business logic mutation with FieldMutation decorator
  //
  // First, create the input in {{className}}Inputs.ts:
  // @InputType({ description: 'Input for publishing {{camelName}}' })
  // export class Publish{{className}}Input extends BaseInput {
  //   @FieldInput(String, { description: '{{className}} to publish', required: true })
  //   id!: string;
  // }
  //
  // Then use FieldMutation decorator (auto-validates, auto-injects context):
  // @FieldMutation(Publish{{className}}Input, {{className}}, {
  //   description: 'Publish {{camelName}}'
  // })
  // async publish{{className}}(
  //   input: Publish{{className}}Input,
  //   ctx: GraphQLContext
  // ): Promise<{{className}}> {
  //   const entity = await this.getRepository(ctx).findOneOrFail({ where: { id: input.id } });
  //
  //   // Ownership is now handled automatically by RelayRepository
  //   entity.published = true;
  //   return await this.getRepository(ctx).save(entity);
  // }
}
